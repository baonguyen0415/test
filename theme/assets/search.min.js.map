{
  "version": 3,
  "sources": ["../../app/scripts/search.js"],
  "sourcesContent": ["class SearchForm extends HTMLElement {\r\n  constructor() {\r\n    super();\r\n    this.elms = {\r\n      formContainer: this.querySelector(\"form[action*='/search']\"),\r\n      inputElement: this.querySelector(\"input[name='q']\"),\r\n      resultsContanier: this.querySelector(\".js-results-container\"),\r\n      viewAllButton: this.querySelector(\".js-view-all\"),\r\n    };\r\n    this.initInputEvent();\r\n    document.addEvent(\"click\", ({ target }) => {\r\n      if (!this.contains(target)) {\r\n        this.setStatus(\"unvisible\");\r\n      }\r\n    });\r\n    this.addEvent(\"click\", this.setStatus.bind(this, \"visible\"));\r\n    this.addEvent(\"click\", () => this.elms.formContainer.submit());\r\n  }\r\n  initInputEvent() {\r\n    let { inputElement, formContainer, resultsContanier } = this.elms;\r\n    inputElement.addEvent(\r\n      \"input\",\r\n      AT.debounce(() => {\r\n        let { value } = inputElement;\r\n        if (!value.trim()) {\r\n          this.setStatus(\"\");\r\n          this.setStatus(\"unvisible\");\r\n          return;\r\n        }\r\n        this.setStatus(\"visible\");\r\n        this.setStatus(\"loading\");\r\n        fetch(`${theme.routes.searchUrl}?view=ajax&${new URLSearchParams(new FormData(formContainer)).toString()}`, {\r\n          dataType: \"text\",\r\n        }).then((content) => {\r\n          resultsContanier.innerHTML = content;\r\n          if (content.trim()) {\r\n            AT.debounce(this.setStatus(\"show\"), 50);\r\n          } else {\r\n            this.setStatus(\"empty\");\r\n          }\r\n        });\r\n      }, 500),\r\n    );\r\n  }\r\n  setStatus(status) {\r\n    switch (status) {\r\n      case \"loading\":\r\n        this.setAttribute(\"data-status\", \"loading\");\r\n        break;\r\n      case \"empty\":\r\n        this.setAttribute(\"data-status\", \"empty\");\r\n        break;\r\n      case \"visible\":\r\n        this.addClass(\"is-visible\");\r\n        break;\r\n      case \"unvisible\":\r\n        this.removeClass(\"is-visible\");\r\n        break;\r\n      case \"show\":\r\n        this.setAttribute(\"data-status\", \"show\");\r\n        break;\r\n      default:\r\n        this.setAttribute(\"data-status\", \"\");\r\n    }\r\n  }\r\n}\r\ncustomElements.define(\"search-form\", SearchForm);\r\nconsole.log(\"search.js loaded\");\r\n"],
  "mappings": "MAAA,mBAAyB,YAAY,CACnC,aAAc,CACZ,QACA,KAAK,KAAO,CACV,cAAe,KAAK,cAAc,2BAClC,aAAc,KAAK,cAAc,mBACjC,iBAAkB,KAAK,cAAc,yBACrC,cAAe,KAAK,cAAc,iBAEpC,KAAK,iBACL,SAAS,SAAS,QAAS,CAAC,CAAE,YAAa,CACzC,AAAK,KAAK,SAAS,IACjB,KAAK,UAAU,eAGnB,KAAK,SAAS,QAAS,KAAK,UAAU,KAAK,KAAM,YACjD,KAAK,SAAS,QAAS,IAAM,KAAK,KAAK,cAAc,UAEvD,gBAAiB,CACf,GAAI,CAAE,eAAc,gBAAe,oBAAqB,KAAK,KAC7D,EAAa,SACX,QACA,GAAG,SAAS,IAAM,CAChB,GAAI,CAAE,SAAU,EAChB,GAAI,CAAC,EAAM,OAAQ,CACjB,KAAK,UAAU,IACf,KAAK,UAAU,aACf,OAEF,KAAK,UAAU,WACf,KAAK,UAAU,WACf,MAAM,GAAG,MAAM,OAAO,uBAAuB,GAAI,iBAAgB,GAAI,UAAS,IAAgB,aAAc,CAC1G,SAAU,SACT,KAAK,AAAC,GAAY,CACnB,EAAiB,UAAY,EAC7B,AAAI,EAAQ,OACV,GAAG,SAAS,KAAK,UAAU,QAAS,IAEpC,KAAK,UAAU,YAGlB,MAGP,UAAU,EAAQ,CAChB,OAAQ,OACD,UACH,KAAK,aAAa,cAAe,WACjC,UACG,QACH,KAAK,aAAa,cAAe,SACjC,UACG,UACH,KAAK,SAAS,cACd,UACG,YACH,KAAK,YAAY,cACjB,UACG,OACH,KAAK,aAAa,cAAe,QACjC,cAEA,KAAK,aAAa,cAAe,OAIzC,eAAe,OAAO,cAAe,GACrC,QAAQ,IAAI",
  "names": []
}
